CREATE EXTENSION timeit;
--
-- Enqueue new test.
--
SELECT timeit.async('pg_sleep(0.1)');
 async 
-------
     1
(1 row)

--
-- Work until there is no more work.
--
CALL timeit.work(return_when_idle := true);
NOTICE:  working
NOTICE:  test id 1 initialized
NOTICE:  test id 1 finalized
NOTICE:  idle
--
-- Have a look at test results.
--
SELECT
    id,
    test_state,
    executions,
    final_result
FROM timeit.tests;
 id | test_state | executions | final_result 
----+------------+------------+--------------
  1 | final      |          1 |          0.1
(1 row)

